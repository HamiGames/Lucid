# Phase 3 Application Services Configuration
# Generated: $(date -u +"%Y-%m-%dT%H:%M:%SZ")
# Target: Raspberry Pi 5 (192.168.0.75)
# Services: Session Pipeline, Session Recorder, Chunk Processor, Session Storage, Session API, RDP Services, Node Management
# Architecture: ARM64

# =============================================================================
# SYSTEM CONFIGURATION (Required by validate-env.sh)
# =============================================================================

PROJECT_NAME=Lucid
PROJECT_VERSION=0.1.0
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# API GATEWAY CONFIGURATION (Required by validate-env.sh)
# =============================================================================

API_GATEWAY_HOST=172.20.0.10
API_GATEWAY_PORT=8080
API_RATE_LIMIT=1000

# =============================================================================
# AUTHENTICATION CONFIGURATION (Required by validate-env.sh)
# =============================================================================

JWT_SECRET=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
SESSION_TIMEOUT=1800

# =============================================================================
# SECURITY CONFIGURATION (Required by validate-env.sh)
# =============================================================================

ENCRYPTION_KEY=${ENCRYPTION_KEY}
SSL_ENABLED=true
SECURITY_HEADERS_ENABLED=true

# =============================================================================
# BLOCKCHAIN CONFIGURATION (Required by validate-env.sh)
# =============================================================================

BLOCKCHAIN_NETWORK=lucid-mainnet
BLOCKCHAIN_CONSENSUS=PoOT
ANCHORING_ENABLED=true

# =============================================================================
# OPTIONAL CONFIGURATION (Optional by validate-env.sh)
# =============================================================================

# Hardware Configuration
HARDWARE_ACCELERATION=true
V4L2_ENABLED=true
GPU_ENABLED=false

# Monitoring Configuration
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true
HEALTH_CHECK_ENABLED=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Alerting Configuration
ALERTING_ENABLED=true
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=85

# =============================================================================
# DISTROLESS BASE CONFIGURATION
# =============================================================================

# Distroless Base Image
DISTROLESS_BASE_IMAGE=gcr.io/distroless/python3-debian12
DISTROLESS_USER=65532:65532
DISTROLESS_SHELL=/bin/false

# Build Configuration
DOCKER_BUILDKIT=1
DOCKER_DEFAULT_PLATFORM=linux/arm64
COMPOSE_DOCKER_CLI_BUILD=1

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Main Network (Foundation + Core + Application + Blockchain)
LUCID_MAIN_NETWORK=lucid-pi-network
LUCID_MAIN_SUBNET=172.20.0.0/16
LUCID_MAIN_GATEWAY=172.20.0.1

# =============================================================================
# DATABASE CONFIGURATION (Inherited from Foundation)
# =============================================================================

# MongoDB Configuration
MONGODB_HOST=172.20.0.11
MONGODB_PORT=27017
MONGODB_DATABASE=lucid
MONGODB_USERNAME=lucid
MONGODB_PASSWORD=${MONGODB_PASSWORD}
MONGODB_AUTH_SOURCE=admin
MONGODB_RETRY_WRITES=false
MONGODB_URL=mongodb://lucid:${MONGODB_PASSWORD}@172.20.0.11:27017/lucid?authSource=admin&retryWrites=false

# Redis Configuration
REDIS_HOST=172.20.0.12
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_URL=redis://:${REDIS_PASSWORD}@172.20.0.12:6379

# Elasticsearch Configuration
ELASTICSEARCH_HOST=172.20.0.13
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=${ELASTICSEARCH_PASSWORD}
ELASTICSEARCH_URL=http://elastic:${ELASTICSEARCH_PASSWORD}@172.20.0.13:9200

# =============================================================================
# SECURITY CONFIGURATION (Inherited from Foundation)
# =============================================================================

# JWT Configuration
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# Encryption Configuration
ENCRYPTION_KEY=${ENCRYPTION_KEY}
ENCRYPTION_ALGORITHM=AES-256-GCM

# Session Configuration
SESSION_SECRET=${SESSION_SECRET}
SESSION_TIMEOUT=1800

# =============================================================================
# APPLICATION SERVICES CONFIGURATION
# =============================================================================

# Session Pipeline
SESSION_PIPELINE_HOST=172.20.0.20
SESSION_PIPELINE_PORT=8083
SESSION_PIPELINE_URL=http://172.20.0.20:8083

# Session Recorder
SESSION_RECORDER_HOST=172.20.0.21
SESSION_RECORDER_PORT=8084
SESSION_RECORDER_URL=http://172.20.0.21:8084

# Session Processor (Chunk Processor)
SESSION_PROCESSOR_HOST=172.20.0.22
SESSION_PROCESSOR_PORT=8085
SESSION_PROCESSOR_URL=http://172.20.0.22:8085

# Session Storage
SESSION_STORAGE_HOST=172.20.0.23
SESSION_STORAGE_PORT=8086
SESSION_STORAGE_URL=http://172.20.0.23:8086

# Session API
SESSION_API_HOST=172.20.0.24
SESSION_API_PORT=8087
SESSION_API_URL=http://172.20.0.24:8087

# RDP Server Manager
RDP_SERVER_MANAGER_HOST=172.20.0.25
RDP_SERVER_MANAGER_PORT=8090
RDP_SERVER_MANAGER_URL=http://172.20.0.25:8090

# RDP XRDP Integration
RDP_XRDP_HOST=172.20.0.26
RDP_XRDP_PORT=8091
RDP_XRDP_URL=http://172.20.0.26:8091

# RDP Controller
RDP_CONTROLLER_HOST=172.20.0.27
RDP_CONTROLLER_PORT=8092
RDP_CONTROLLER_URL=http://172.20.0.27:8092

# RDP Monitor
RDP_MONITOR_HOST=172.20.0.28
RDP_MONITOR_PORT=8093
RDP_MONITOR_URL=http://172.20.0.28:8093

# Node Management
NODE_MANAGEMENT_HOST=172.20.0.29
NODE_MANAGEMENT_PORT=8095
NODE_MANAGEMENT_URL=http://172.20.0.29:8095

# =============================================================================
# SESSION MANAGEMENT CONFIGURATION
# =============================================================================

# Session Configuration
SESSION_CHUNK_SIZE=8388608
SESSION_COMPRESSION_LEVEL=1
SESSION_ENCRYPTION_ENABLED=true
SESSION_RETENTION_DAYS=30
SESSION_MERKLE_TREE_ENABLED=true

# Session Processing
SESSION_PROCESSING_WORKERS=4
SESSION_ENCRYPTION_WORKERS=2
SESSION_COMPRESSION_WORKERS=2
SESSION_STORAGE_WORKERS=4

# Session Pipeline Configuration
SESSION_PIPELINE_BATCH_SIZE=100
SESSION_PIPELINE_TIMEOUT=30
SESSION_PIPELINE_RETRY_ATTEMPTS=3

# Session Recorder Configuration
SESSION_RECORDER_BUFFER_SIZE=64MB
SESSION_RECORDER_FLUSH_INTERVAL=5s
SESSION_RECORDER_COMPRESSION_ENABLED=true

# Session Storage Configuration
SESSION_STORAGE_BACKEND=mongodb
SESSION_STORAGE_INDEXING_ENABLED=true
SESSION_STORAGE_CACHING_ENABLED=true

# =============================================================================
# RDP SERVICES CONFIGURATION
# =============================================================================

# RDP Configuration
RDP_MAX_SESSIONS=10
RDP_SESSION_TIMEOUT=3600
RDP_RESOURCE_LIMIT_CPU=80
RDP_RESOURCE_LIMIT_MEMORY=2GB
RDP_RESOURCE_LIMIT_DISK=10GB

# RDP Server Manager Configuration
RDP_SERVER_MANAGER_POOL_SIZE=5
RDP_SERVER_MANAGER_TIMEOUT=30
RDP_SERVER_MANAGER_HEALTH_CHECK_INTERVAL=60s

# RDP XRDP Configuration
RDP_XRDP_DISPLAY_RESOLUTION=1920x1080
RDP_XRDP_COLOR_DEPTH=24
RDP_XRDP_COMPRESSION_ENABLED=true

# RDP Controller Configuration
RDP_CONTROLLER_SESSION_TIMEOUT=3600
RDP_CONTROLLER_IDLE_TIMEOUT=1800
RDP_CONTROLLER_MAX_IDLE_SESSIONS=5

# RDP Monitor Configuration
RDP_MONITOR_METRICS_ENABLED=true
RDP_MONITOR_ALERT_THRESHOLD_CPU=80
RDP_MONITOR_ALERT_THRESHOLD_MEMORY=80
RDP_MONITOR_ALERT_THRESHOLD_DISK=90

# =============================================================================
# NODE MANAGEMENT CONFIGURATION
# =============================================================================

# Node Management Configuration
NODE_MANAGEMENT_SECRET=${NODE_MANAGEMENT_SECRET}
NODE_POOL_MAX_SIZE=100
NODE_PAYOUT_THRESHOLD=10
NODE_CONSENSUS_WEIGHT=1.0

# Node Pool Configuration
NODE_POOL_MIN_SIZE=5
NODE_POOL_SCALE_UP_THRESHOLD=80
NODE_POOL_SCALE_DOWN_THRESHOLD=20
NODE_POOL_HEALTH_CHECK_INTERVAL=30s

# Node Performance Configuration
NODE_PERFORMANCE_MONITORING=true
NODE_PERFORMANCE_METRICS_ENABLED=true
NODE_PERFORMANCE_ALERT_THRESHOLD=90

# =============================================================================
# DISTROLESS RUNTIME CONFIGURATION
# =============================================================================

# Runtime Environment
LUCID_ENV=production
LUCID_PLATFORM=arm64
LUCID_ARCHITECTURE=linux/arm64

# Container Configuration
CONTAINER_USER=65532
CONTAINER_GROUP=65532
CONTAINER_UID=65532
CONTAINER_GID=65532

# Security Options
SECURITY_OPT_NO_NEW_PRIVILEGES=true
SECURITY_OPT_READONLY_ROOTFS=true
SECURITY_OPT_NO_EXEC=true

# Capability Configuration
CAP_DROP=ALL
CAP_ADD=NET_BIND_SERVICE

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Service Health Endpoints
SESSION_PIPELINE_HEALTH_URL=http://172.20.0.20:8083/health
SESSION_RECORDER_HEALTH_URL=http://172.20.0.21:8084/health
SESSION_PROCESSOR_HEALTH_URL=http://172.20.0.22:8085/health
SESSION_STORAGE_HEALTH_URL=http://172.20.0.23:8086/health
SESSION_API_HEALTH_URL=http://172.20.0.24:8087/health
RDP_SERVER_MANAGER_HEALTH_URL=http://172.20.0.25:8090/health
NODE_MANAGEMENT_HEALTH_URL=http://172.20.0.29:8095/health

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level
LOG_LEVEL=INFO
LOG_FORMAT=json

# Log Output
LOG_OUTPUT=stdout
LOG_FILE=/dev/stdout

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment Target
DEPLOYMENT_TARGET=raspberry-pi
DEPLOYMENT_HOST=192.168.0.75
DEPLOYMENT_USER=pickme
DEPLOYMENT_PATH=/mnt/myssd/Lucid/Lucid

# Registry Configuration
REGISTRY=ghcr.io
REPOSITORY=hamigames/lucid
IMAGE_TAG=latest-arm64

# =============================================================================
# BUILD CONFIGURATION
# =============================================================================

# Build Platform
BUILD_PLATFORM=linux/arm64
BUILD_ARCH=arm64
BUILD_OS=linux

# Build Arguments
BUILD_DATE=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
BUILD_VERSION=0.1.0
BUILD_REVISION=$(git rev-parse --short HEAD 2>/dev/null || echo "unknown")
