{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RDP Session Controller Data Schemas",
  "description": "JSON schemas for RDP session and metrics data structures",
  "definitions": {
    "SessionStatus": {
      "type": "string",
      "enum": ["creating", "active", "idle", "suspended", "terminated", "error"],
      "description": "RDP session status enumeration"
    },
    "ConnectionStatus": {
      "type": "string",
      "enum": ["connecting", "connected", "disconnected", "error"],
      "description": "RDP connection status enumeration"
    },
    "RdpSession": {
      "type": "object",
      "required": [
        "session_id",
        "user_id",
        "server_id",
        "status",
        "created_at"
      ],
      "properties": {
        "session_id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique session identifier"
        },
        "user_id": {
          "type": "string",
          "description": "User identifier who owns the session"
        },
        "server_id": {
          "type": "string",
          "format": "uuid",
          "description": "RDP server identifier"
        },
        "connection_id": {
          "type": ["string", "null"],
          "format": "uuid",
          "description": "Connection identifier (null if not connected)"
        },
        "status": {
          "$ref": "#/definitions/SessionStatus"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when session was created"
        },
        "updated_at": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "ISO 8601 timestamp when session was last updated"
        },
        "terminated_at": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "ISO 8601 timestamp when session was terminated"
        },
        "last_activity": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "ISO 8601 timestamp of last activity"
        },
        "config": {
          "type": "object",
          "description": "Session configuration dictionary",
          "additionalProperties": true
        },
        "metadata": {
          "type": "object",
          "description": "Session metadata dictionary",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    },
    "SessionMetrics": {
      "type": "object",
      "required": [
        "session_id",
        "start_time"
      ],
      "properties": {
        "session_id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique session identifier"
        },
        "start_time": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when metrics collection started"
        },
        "last_updated": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "ISO 8601 timestamp when metrics were last updated"
        },
        "cpu_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "CPU usage percentage",
          "default": 0.0
        },
        "memory_usage": {
          "type": "integer",
          "minimum": 0,
          "description": "Memory usage in bytes",
          "default": 0
        },
        "memory_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Memory usage percentage",
          "default": 0.0
        },
        "disk_usage": {
          "type": "integer",
          "minimum": 0,
          "description": "Disk usage in bytes",
          "default": 0
        },
        "disk_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Disk usage percentage",
          "default": 0.0
        },
        "network_bytes_sent": {
          "type": "integer",
          "minimum": 0,
          "description": "Total network bytes sent",
          "default": 0
        },
        "network_bytes_recv": {
          "type": "integer",
          "minimum": 0,
          "description": "Total network bytes received",
          "default": 0
        },
        "network_packets_sent": {
          "type": "integer",
          "minimum": 0,
          "description": "Total network packets sent",
          "default": 0
        },
        "network_packets_recv": {
          "type": "integer",
          "minimum": 0,
          "description": "Total network packets received",
          "default": 0
        },
        "active_connections": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of active connections",
          "default": 0
        },
        "process_count": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of processes",
          "default": 0
        }
      },
      "additionalProperties": false
    },
    "RdpConnection": {
      "type": "object",
      "required": [
        "connection_id",
        "server_id",
        "status",
        "created_at",
        "last_activity"
      ],
      "properties": {
        "connection_id": {
          "type": "string",
          "format": "uuid",
          "description": "Unique connection identifier"
        },
        "server_id": {
          "type": "string",
          "format": "uuid",
          "description": "RDP server identifier"
        },
        "status": {
          "type": "string",
          "description": "Connection status (connecting, active, closing, closed)"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when connection was created"
        },
        "last_activity": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp of last activity"
        },
        "metrics": {
          "type": "object",
          "description": "Connection metrics dictionary",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    }
  }
}

