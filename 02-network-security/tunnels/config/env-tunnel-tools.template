# Lucid Tunnel Tools Environment Configuration Template
# Copy this file to .env.tunnel-tools and fill in the values
# File: 02-network-security/tunnels/config/env-tunnel-tools.template
# Generated: 2025-01-27

# =============================================================================
# Service Configuration
# =============================================================================
SERVICE_NAME=tunnel-tools
SERVICE_PORT=7000
TUNNEL_PORT=7000
TUNNEL_MODE=client

# =============================================================================
# Tor Proxy Configuration
# =============================================================================
# Tor container name (must match docker-compose service name)
TOR_CONTAINER_NAME=tor-proxy

# Tor Control Port Configuration
CONTROL_HOST=tor-proxy
CONTROL_PORT=9051

# Tor SOCKS5 Proxy Configuration
TOR_PROXY=tor-proxy:9050
TOR_PROXY_HOST=tor-proxy
TOR_PROXY_PORT=9050

# Tor Cookie Authentication
COOKIE_FILE=${COOKIE_FILE}

# =============================================================================
# Onion Service Configuration
# =============================================================================
# Onion port mappings (format: "VIRTUAL_PORT TARGET_HOST:TARGET_PORT")
# Multiple mappings: "80 api-gateway:8080, 443 api-gateway:8443"
ONION_PORTS=80 api-gateway:8080

# Upstream service configuration (used as defaults in scripts)
UPSTREAM_SERVICE=api-gateway
UPSTREAM_PORT=8080

# Onion output file path
WRITE_ENV=@{WRITE_ENV}

# Onion rotation interval (minutes; 0 = create once, no rotation)
ROTATE_INTERVAL=0

# =============================================================================
# Environment File Configuration
# =============================================================================
# Path to environment file for storing onion addresses
# This file is written by entrypoint.py and read by scripts
ENV_FILE=${ENV_FILE}

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_OUTPUT=stdout

# =============================================================================
# Health Check Configuration
# =============================================================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_START_PERIOD=45

# =============================================================================
# Status and Metrics Configuration
# =============================================================================
# Status file paths
STATUS_JSON_PATH=/run/lucid/onion/tunnel_status.json
METRICS_JSON_PATH=/var/lib/tunnel/metrics.json
STATUS_ENV_PATH=/run/lucid/onion/tunnel_status.env

# Metrics collection
METRICS_ENABLED=true
METRICS_UPDATE_INTERVAL=60
METRICS_RETENTION_DAYS=7

# =============================================================================
# Operational Configuration
# =============================================================================
# Operational config file path
OPERATIONAL_CONFIG_PATH=/app/config/operational-config.json

# Logging configuration file path
LOGGING_CONFIG_PATH=/app/config/logging-config.json

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_FILE_PATH=/var/log/tunnel/tunnel-tools.log
LOG_MAX_SIZE=10MB
LOG_MAX_FILES=5

# =============================================================================
# Lucid Platform Configuration
# =============================================================================
LUCID_ENV=production
LUCID_PLATFORM=arm64

# =============================================================================
# Build Information (auto-generated, do not modify)
# =============================================================================
# BUILD_TIMESTAMP=${BUILD_TIMESTAMP}
# GIT_SHA=${GIT_SHA}
# VERSION=1.0.0

