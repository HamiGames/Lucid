<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Management - Lucid Admin</title>
    <link rel="stylesheet" href="/static/css/admin.css">
    <link rel="stylesheet" href="/static/css/theme.css">
    <script src="/static/js/dashboard.js" defer></script>
</head>
<body>
    <div class="admin-container">
        <!-- Navigation Header -->
        <header class="admin-header">
            <div class="header-left">
                <h1 class="admin-title">Blockchain Management</h1>
                <span class="admin-version">v1.0.0</span>
            </div>
            <div class="header-right">
                <div class="admin-user">
                    <span class="user-name" id="user-name">Admin User</span>
                    <button class="logout-btn" id="logout-btn">Logout</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Blockchain Status Overview -->
            <section class="blockchain-overview">
                <div class="overview-grid">
                    <!-- Network Status Card -->
                    <div class="overview-card network-status-card">
                        <div class="card-header">
                            <h3>Network Status</h3>
                            <div class="card-actions">
                                <button class="refresh-btn" id="refresh-network-status">Refresh</button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="status-metrics">
                                <div class="metric">
                                    <span class="metric-label">Network Height</span>
                                    <span class="metric-value" id="network-height">0</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Local Height</span>
                                    <span class="metric-value" id="local-height">0</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Sync Status</span>
                                    <span class="metric-value" id="sync-status">--</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Pending Transactions</span>
                                    <span class="metric-value" id="pending-transactions">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Network Health Card -->
                    <div class="overview-card network-health-card">
                        <div class="card-header">
                            <h3>Network Health</h3>
                        </div>
                        <div class="card-content">
                            <div class="health-metrics">
                                <div class="metric">
                                    <span class="metric-label">Hash Rate</span>
                                    <span class="metric-value" id="network-hash-rate">0 H/s</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Difficulty</span>
                                    <span class="metric-value" id="network-difficulty">0</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Last Block Time</span>
                                    <span class="metric-value" id="last-block-time">--</span>
                                </div>
                                <div class="metric">
                                    <span class="metric-label">Block Time</span>
                                    <span class="metric-value" id="avg-block-time">0s</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Blockchain Controls -->
            <section class="blockchain-controls">
                <div class="controls-header">
                    <h2>Blockchain Operations</h2>
                </div>
                <div class="controls-grid">
                    <button class="control-btn primary" id="anchor-sessions-btn">
                        <span class="btn-icon">🔗</span>
                        <span class="btn-text">Anchor Sessions</span>
                        <span class="btn-description">Anchor pending sessions to blockchain</span>
                    </button>
                    <button class="control-btn secondary" id="resync-blockchain-btn">
                        <span class="btn-icon">🔄</span>
                        <span class="btn-text">Resync Blockchain</span>
                        <span class="btn-description">Force blockchain resynchronization</span>
                    </button>
                    <button class="control-btn secondary" id="view-anchoring-queue-btn">
                        <span class="btn-icon">📋</span>
                        <span class="btn-text">View Anchoring Queue</span>
                        <span class="btn-description">View pending anchoring operations</span>
                    </button>
                    <button class="control-btn secondary" id="blockchain-stats-btn">
                        <span class="btn-icon">📊</span>
                        <span class="btn-text">Blockchain Statistics</span>
                        <span class="btn-description">View detailed blockchain statistics</span>
                    </button>
                </div>
            </section>

            <!-- Anchoring Queue -->
            <section class="anchoring-section">
                <div class="section-header">
                    <h2>Anchoring Queue</h2>
                    <div class="section-actions">
                        <button class="btn secondary" id="refresh-queue-btn">Refresh</button>
                        <button class="btn primary" id="process-queue-btn">Process Queue</button>
                    </div>
                </div>
                <div class="queue-table-container">
                    <table class="queue-table" id="anchoring-queue-table">
                        <thead>
                            <tr>
                                <th class="checkbox-col">
                                    <input type="checkbox" id="select-all-queue">
                                </th>
                                <th class="session-id-col">Session ID</th>
                                <th class="user-col">User</th>
                                <th class="chunks-col">Chunks</th>
                                <th class="merkle-root-col">Merkle Root</th>
                                <th class="priority-col">Priority</th>
                                <th class="created-col">Created</th>
                                <th class="status-col">Status</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="anchoring-queue-body">
                            <!-- Queue items will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Recent Blocks -->
            <section class="blocks-section">
                <div class="section-header">
                    <h2>Recent Blocks</h2>
                    <div class="section-actions">
                        <button class="btn secondary" id="refresh-blocks-btn">Refresh</button>
                    </div>
                </div>
                <div class="blocks-table-container">
                    <table class="blocks-table" id="recent-blocks-table">
                        <thead>
                            <tr>
                                <th class="height-col">Height</th>
                                <th class="hash-col">Hash</th>
                                <th class="timestamp-col">Timestamp</th>
                                <th class="transactions-col">Transactions</th>
                                <th class="size-col">Size</th>
                                <th class="difficulty-col">Difficulty</th>
                                <th class="actions-col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="recent-blocks-body">
                            <!-- Blocks will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Blockchain Statistics -->
            <section class="blockchain-stats">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <h3>Blockchain Statistics</h3>
                        </div>
                        <div class="stat-content">
                            <div class="stat-item">
                                <span class="stat-label">Total Blocks</span>
                                <span class="stat-value" id="total-blocks">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Total Transactions</span>
                                <span class="stat-value" id="total-transactions">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Anchored Sessions</span>
                                <span class="stat-value" id="anchored-sessions">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Pending Anchors</span>
                                <span class="stat-value" id="pending-anchors">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <h3>Network Performance</h3>
                        </div>
                        <div class="stat-content">
                            <div class="stat-item">
                                <span class="stat-label">Average Block Time</span>
                                <span class="stat-value" id="avg-block-time-stat">0s</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Network Latency</span>
                                <span class="stat-value" id="network-latency">0ms</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Sync Progress</span>
                                <span class="stat-value" id="sync-progress">0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Connection Count</span>
                                <span class="stat-value" id="connection-count">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Navigation Sidebar -->
        <nav class="admin-sidebar">
            <div class="sidebar-content">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="/admin/dashboard" class="nav-link">
                            <span class="nav-icon">📊</span>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/sessions" class="nav-link">
                            <span class="nav-icon">🖥️</span>
                            <span class="nav-text">Sessions</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/users" class="nav-link">
                            <span class="nav-icon">👥</span>
                            <span class="nav-text">Users</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/nodes" class="nav-link">
                            <span class="nav-icon">🖥️</span>
                            <span class="nav-text">Nodes</span>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a href="/admin/blockchain" class="nav-link">
                            <span class="nav-icon">⛓️</span>
                            <span class="nav-text">Blockchain</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/audit" class="nav-link">
                            <span class="nav-icon">📋</span>
                            <span class="nav-text">Audit Logs</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/admin/config" class="nav-link">
                            <span class="nav-icon">⚙️</span>
                            <span class="nav-text">Configuration</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- Anchoring Modal -->
    <div class="modal" id="anchoring-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Anchor Sessions to Blockchain</h3>
                <button class="modal-close" id="close-anchoring">&times;</button>
            </div>
            <div class="modal-body">
                <div class="anchoring-form">
                    <div class="form-group">
                        <label for="session-ids">Session IDs (comma-separated)</label>
                        <textarea id="session-ids" rows="3" placeholder="Enter session IDs separated by commas..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="anchoring-priority">Priority</label>
                        <select id="anchoring-priority">
                            <option value="low">Low</option>
                            <option value="normal" selected>Normal</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="force-anchoring">
                            Force anchoring (ignore validation)
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" id="cancel-anchoring">Cancel</button>
                <button class="btn primary" id="submit-anchoring">Anchor Sessions</button>
            </div>
        </div>
    </div>

    <!-- Block Details Modal -->
    <div class="modal" id="block-details-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Block Details</h3>
                <button class="modal-close" id="close-block-details">&times;</button>
            </div>
            <div class="modal-body">
                <div class="block-details-content" id="block-details-content">
                    <!-- Block details will be populated by JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn secondary" id="cancel-block-details">Close</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>
</body>
</html>
