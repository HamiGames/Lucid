# Lucid TRON Staking - TRX Staking Configuration
# Optional YAML configuration for TRX staking service
# File: payment-systems/tron/config/staking-config.yaml
# Purpose: Define TRX staking operations, resource management, and reward distribution

# Global Staking Configuration
global:
  service_name: "lucid-tron-staking"
  service_version: "1.0.0"
  debug: false
  log_level: "INFO"
  host: "0.0.0.0"
  port: 8096

# Staking Configuration
staking:
  # Staking Types
  types:
    energy:
      enabled: true
      description: "Stake TRX for energy"
      min_amount_trx: 1.0
      max_amount_trx: 1000000.0
      duration_days: 3
    
    bandwidth:
      enabled: true
      description: "Stake TRX for bandwidth"
      min_amount_trx: 1.0
      max_amount_trx: 1000000.0
      duration_days: 3
    
    bandwidth_energy:
      enabled: true
      description: "Stake TRX for bandwidth and energy"
      min_amount_trx: 1.0
      max_amount_trx: 1000000.0
      duration_days: 3
  
  # Staking Limits
  limits:
    min_staking_amount_trx: 1.0
    max_staking_amount_trx: 1000000.0
    min_staking_duration_days: 1
    max_staking_duration_days: 365
    max_active_stakes: 10
  
  # Staking Operations
  operations:
    stake: true
    unstake: true
    get_staking_info: true
    get_resource_info: true
    get_staking_records: true
    get_staking_stats: true

# Resource Management
resources:
  # Resource Types
  types:
    energy:
      enabled: true
      description: "Energy resource"
      unit: "energy"
      conversion_rate: 1.0  # TRX to energy conversion rate
    
    bandwidth:
      enabled: true
      description: "Bandwidth resource"
      unit: "bandwidth"
      conversion_rate: 1.0  # TRX to bandwidth conversion rate
  
  # Resource Operations
  operations:
    freeze_balance: true
    unfreeze_balance: true
    delegate_resource: true
    undelegate_resource: true
    get_resource_info: true
  
  # Resource Limits
  limits:
    min_freeze_amount_trx: 1.0
    max_freeze_amount_trx: 1000000.0
    freeze_duration_days: 3
    max_delegated_resources: 100

# Reward Configuration
rewards:
  enabled: false  # TRX staking doesn't provide rewards, only resources
  reward_rate: 0.0
  reward_distribution:
    method: "none"  # Options: none, proportional, fixed
    distribution_interval_blocks: 0
    reward_per_block: 0

# TRON Network Integration
tron:
  network_type: "mainnet"
  tron_client_url: "http://tron-client:8091"
  wallet_manager_url: "http://tron-wallet-manager:8093"
  timeout_seconds: 30
  retry_attempts: 3
  
  # Staking Operations
  staking_operations:
    freeze_timeout_seconds: 60
    unfreeze_timeout_seconds: 60
    delegate_timeout_seconds: 60
    undelegate_timeout_seconds: 60

# Database Configuration
database:
  mongodb:
    url: "mongodb://lucid-mongodb:27017/lucid_payments"
    database: "lucid_payments"
    collections:
      staking_records: "staking_records"
      resource_info: "resource_info"
      staking_stats: "staking_stats"
  
  redis:
    url: "redis://lucid-redis:6379/0"
    cache_ttl_seconds: 300

# Monitoring and Metrics
monitoring:
  enabled: true
  metrics:
    enabled: true
    endpoint: "/metrics"
    port: 9090
  
  health_check:
    enabled: true
    endpoint: "/health"
    interval_seconds: 30
    timeout_seconds: 10
  
  staking_metrics:
    enabled: true
    track_staking_operations: true
    track_resource_usage: true
    track_staking_amounts: true
    track_unstaking_operations: true

# Error Handling
error_handling:
  retry:
    enabled: true
    max_retries: 3
    retry_delay_seconds: 5
    exponential_backoff: true
  
  staking_validation:
    validate_amounts: true
    validate_durations: true
    validate_resources: true
    require_confirmation: false

# Security Configuration
security:
  access_control:
    require_authentication: true
    require_authorization: true
    allowed_roles: ["USER", "NODE_OPERATOR", "ADMIN", "SUPER_ADMIN"]
  
  staking_validation:
    validate_amounts: true
    validate_durations: true
    validate_limits: true
    require_approval: false
  
  audit:
    enabled: true
    log_staking_operations: true
    log_unstaking_operations: true
    log_resource_operations: true
    audit_log_retention_days: 90

# Rate Limiting
rate_limiting:
  enabled: true
  requests_per_minute: 100
  burst_size: 200
  window_seconds: 60

