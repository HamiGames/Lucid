# LUCID TRON Payout Router - Error Codes Configuration
# File: payment-systems/tron/config/payout-error-codes.yaml
# Purpose: Payout-specific error codes and recovery strategies

errors:
  # Payout Validation Errors (P1xx)
  payout_validation:
    P100:
      code: "P100"
      message: "Invalid payout recipient address"
      http_status: 400
      retryable: false
      recovery_action: "validate_address_format"
      severity: "warning"
    
    P101:
      code: "P101"
      message: "Payout amount below minimum"
      http_status: 400
      retryable: false
      recovery_action: "check_minimum_amount"
      severity: "warning"
    
    P102:
      code: "P102"
      message: "Payout amount exceeds maximum"
      http_status: 400
      retryable: false
      recovery_action: "check_maximum_amount"
      severity: "warning"
    
    P103:
      code: "P103"
      message: "Daily payout limit exceeded"
      http_status: 429
      retryable: true
      recovery_action: "wait_for_daily_reset"
      severity: "high"
    
    P104:
      code: "P104"
      message: "Monthly payout limit exceeded"
      http_status: 429
      retryable: true
      recovery_action: "wait_for_monthly_reset"
      severity: "high"
    
    P105:
      code: "P105"
      message: "Recipient payout limit exceeded"
      http_status: 429
      retryable: true
      recovery_action: "wait_for_limit_reset"
      severity: "high"
    
    P106:
      code: "P106"
      message: "Invalid payout currency"
      http_status: 400
      retryable: false
      recovery_action: "use_supported_currency"
      severity: "warning"
    
    P107:
      code: "P107"
      message: "Recipient address blocked or restricted"
      http_status: 403
      retryable: false
      recovery_action: "use_different_address"
      severity: "high"
    
    P108:
      code: "P108"
      message: "Payout reason not recognized"
      http_status: 400
      retryable: false
      recovery_action: "use_valid_payout_reason"
      severity: "warning"

  # Payout Processing Errors (P2xx)
  payout_processing:
    P200:
      code: "P200"
      message: "Insufficient wallet balance for payout"
      http_status: 400
      retryable: true
      recovery_action: "fund_wallet"
      severity: "high"
    
    P201:
      code: "P201"
      message: "Insufficient network gas/bandwidth"
      http_status: 503
      retryable: true
      recovery_action: "wait_for_resources"
      severity: "high"
    
    P202:
      code: "P202"
      message: "Payout transaction broadcast failed"
      http_status: 502
      retryable: true
      recovery_action: "retry_broadcast"
      severity: "high"
    
    P203:
      code: "P203"
      message: "Payout transaction confirmation timeout"
      http_status: 504
      retryable: true
      recovery_action: "check_transaction_status"
      severity: "high"
    
    P204:
      code: "P204"
      message: "Payout transaction rejected by network"
      http_status: 400
      retryable: false
      recovery_action: "investigate_rejection"
      severity: "high"
    
    P205:
      code: "P205"
      message: "Wallet locked for security verification"
      http_status: 423
      retryable: true
      recovery_action: "wait_for_unlock"
      severity: "high"
    
    P206:
      code: "P206"
      message: "Payout transaction signature invalid"
      http_status: 400
      retryable: false
      recovery_action: "regenerate_signature"
      severity: "high"
    
    P207:
      code: "P207"
      message: "USDT contract operation failed"
      http_status: 500
      retryable: true
      recovery_action: "retry_contract_call"
      severity: "high"

  # Batch Processing Errors (P3xx)
  batch_processing:
    P300:
      code: "P300"
      message: "Batch contains invalid payouts"
      http_status: 400
      retryable: false
      recovery_action: "validate_batch_items"
      severity: "warning"
    
    P301:
      code: "P301"
      message: "Batch size exceeds maximum"
      http_status: 400
      retryable: false
      recovery_action: "split_batch"
      severity: "warning"
    
    P302:
      code: "P302"
      message: "Batch processing timeout"
      http_status: 504
      retryable: true
      recovery_action: "retry_batch"
      severity: "high"
    
    P303:
      code: "P303"
      message: "Batch partially failed"
      http_status: 207
      retryable: true
      recovery_action: "retry_failed_items"
      severity: "high"
    
    P304:
      code: "P304"
      message: "Batch scheduling failed"
      http_status: 500
      retryable: true
      recovery_action: "retry_schedule"
      severity: "warning"

  # Routing Errors (P4xx)
  routing:
    P400:
      code: "P400"
      message: "Invalid payout route"
      http_status: 400
      retryable: false
      recovery_action: "select_valid_route"
      severity: "warning"
    
    P401:
      code: "P401"
      message: "Payout route unavailable"
      http_status: 503
      retryable: true
      recovery_action: "wait_for_route_availability"
      severity: "high"
    
    P402:
      code: "P402"
      message: "KYC route requires verification"
      http_status: 403
      retryable: false
      recovery_action: "complete_kyc_verification"
      severity: "high"
    
    P403:
      code: "P403"
      message: "Route fee exceeds budget"
      http_status: 400
      retryable: false
      recovery_action: "use_alternative_route"
      severity: "warning"

  # State Errors (P5xx)
  state_management:
    P500:
      code: "P500"
      message: "Invalid payout state transition"
      http_status: 409
      retryable: false
      recovery_action: "check_payout_state"
      severity: "warning"
    
    P501:
      code: "P501"
      message: "Payout not found"
      http_status: 404
      retryable: false
      recovery_action: "verify_payout_id"
      severity: "warning"
    
    P502:
      code: "P502"
      message: "Cannot cancel completed payout"
      http_status: 409
      retryable: false
      recovery_action: "create_reverse_payout"
      severity: "warning"
    
    P503:
      code: "P503"
      message: "Payout expired"
      http_status: 410
      retryable: false
      recovery_action: "create_new_payout"
      severity: "warning"

  # Compliance Errors (P6xx)
  compliance:
    P600:
      code: "P600"
      message: "AML check failed"
      http_status: 403
      retryable: false
      recovery_action: "manual_review"
      severity: "critical"
    
    P601:
      code: "P601"
      message: "Recipient on sanctions list"
      http_status: 403
      retryable: false
      recovery_action: "manual_review"
      severity: "critical"
    
    P602:
      code: "P602"
      message: "Payout requires approval"
      http_status: 202
      retryable: false
      recovery_action: "wait_for_approval"
      severity: "high"
    
    P603:
      code: "P603"
      message: "Approval timeout"
      http_status: 408
      retryable: false
      recovery_action: "escalate_approval"
      severity: "high"

  # Database Errors (P7xx)
  database:
    P700:
      code: "P700"
      message: "Failed to save payout"
      http_status: 500
      retryable: true
      recovery_action: "retry_save"
      severity: "high"
    
    P701:
      code: "P701"
      message: "Failed to update payout status"
      http_status: 500
      retryable: true
      recovery_action: "retry_update"
      severity: "high"
    
    P702:
      code: "P702"
      message: "Payout query failed"
      http_status: 500
      retryable: true
      recovery_action: "retry_query"
      severity: "high"
    
    P703:
      code: "P703"
      message: "Batch query failed"
      http_status: 500
      retryable: true
      recovery_action: "retry_query"
      severity: "high"

# Success Codes
success:
  S200:
    code: "S200"
    message: "Payout created successfully"
  
  S201:
    code: "S201"
    message: "Payout processed successfully"
  
  S202:
    code: "S202"
    message: "Payout confirmed"
  
  S203:
    code: "S203"
    message: "Batch created successfully"
  
  S204:
    code: "S204"
    message: "Payout routed successfully"

# Error Severity Levels
severity_levels:
  warning:
    level: 1
    action: "log_and_notify"
    escalation_threshold: 10
  
  high:
    level: 2
    action: "alert_and_retry"
    escalation_threshold: 5
  
  critical:
    level: 3
    action: "immediate_alert_and_block"
    escalation_threshold: 1

# Retry Policies by Error Category
retry_policies:
  network:
    max_retries: 5
    backoff: "exponential"
    backoff_factor: 2.0
    max_backoff_seconds: 300
  
  transaction:
    max_retries: 3
    backoff: "exponential"
    backoff_factor: 2.0
    max_backoff_seconds: 60
  
  database:
    max_retries: 3
    backoff: "linear"
    backoff_increment: 1
    max_backoff_seconds: 10
  
  rate_limit:
    max_retries: 10
    backoff: "exponential"
    backoff_factor: 2.0
    max_backoff_seconds: 3600
