# LUCID TRON Client - Retry Configuration
# File: payment-systems/tron/config/retry-config.yaml
# Purpose: Define retry logic with exponential backoff

# Global Retry Settings
global:
  enabled: true
  default_max_retries: 3
  default_initial_delay: 1.0
  default_max_delay: 60.0
  default_exponential_base: 2.0
  default_jitter: true
  default_jitter_range: [0.0, 0.1]

# Network Request Retry
network_request:
  enabled: true
  max_retries: 3
  initial_delay: 1.0
  max_delay: 30.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "ConnectionError"
    - "TimeoutError"
    - "httpx.ConnectError"
    - "httpx.TimeoutException"
    - "httpx.NetworkError"

# Transaction Broadcast Retry
transaction_broadcast:
  enabled: true
  max_retries: 5
  initial_delay: 2.0
  max_delay: 60.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.15]
  retryable_exceptions:
    - "ConnectionError"
    - "TimeoutError"
    - "NetworkError"
    - "ServiceUnavailableError"

# Account Query Retry
account_query:
  enabled: true
  max_retries: 3
  initial_delay: 1.0
  max_delay: 30.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "ConnectionError"
    - "TimeoutError"
    - "NetworkError"

# Balance Query Retry
balance_query:
  enabled: true
  max_retries: 3
  initial_delay: 1.0
  max_delay: 30.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "ConnectionError"
    - "TimeoutError"
    - "NetworkError"

# Network Info Retry
network_info:
  enabled: true
  max_retries: 3
  initial_delay: 1.0
  max_delay: 30.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "ConnectionError"
    - "TimeoutError"
    - "NetworkError"

# Transaction Confirmation Retry
transaction_confirmation:
  enabled: true
  max_retries: 30  # Check every 10 seconds for 5 minutes
  initial_delay: 10.0
  max_delay: 10.0  # Fixed delay for confirmation checks
  exponential_base: 1.0  # No backoff
  jitter: false
  retryable_exceptions:
    - "TransactionNotFoundError"
    - "TransactionPendingError"

# MongoDB Operation Retry
mongodb_operation:
  enabled: true
  max_retries: 3
  initial_delay: 0.5
  max_delay: 10.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "pymongo.errors.ConnectionFailure"
    - "pymongo.errors.ServerSelectionTimeoutError"
    - "pymongo.errors.NetworkTimeout"

# Redis Operation Retry
redis_operation:
  enabled: true
  max_retries: 3
  initial_delay: 0.5
  max_delay: 5.0
  exponential_base: 2.0
  jitter: true
  jitter_range: [0.0, 0.1]
  retryable_exceptions:
    - "redis.ConnectionError"
    - "redis.TimeoutError"
    - "redis.BusyLoadingError"

# Monitoring
monitoring:
  enabled: true
  log_retries: true
  metrics_enabled: true
  track_retry_stats: true

