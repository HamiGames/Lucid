# LUCID TRON Relay Service Configuration
# READ-ONLY blockchain relay and caching service

service:
  name: lucid-tron-relay
  version: 1.0.0
  description: TRON blockchain relay service (read-only)
  type: relay

relay:
  # Relay ID for identification
  id: relay-001
  
  # Relay mode options:
  #   - full:      Full relay with all features (default)
  #   - cache:     Cache-only mode
  #   - validator: Validation-only mode
  #   - monitor:   Monitoring-only mode
  mode: full
  
  # Relay is READ-ONLY and has NO private key access
  security:
    read_only: true
    private_key_access: false
    key_management: disabled

tron_network:
  # Network selection: mainnet, shasta (testnet), nile
  network: mainnet
  
  # Primary RPC endpoint
  rpc_url: https://api.trongrid.io
  
  # Network-specific endpoints
  endpoints:
    mainnet:
      rpc_url: https://api.trongrid.io
      ws_url: wss://api.trongrid.io/jsonrpc
    shasta:
      rpc_url: https://api.shasta.trongrid.io
      ws_url: wss://api.shasta.trongrid.io/jsonrpc
    nile:
      rpc_url: https://nile.trongrid.io
      ws_url: wss://nile.trongrid.io/jsonrpc
  
  # TronGrid API configuration
  trongrid:
    # API key for higher rate limits
    api_key: null
    
    # Rate limiting
    rate_limit_enabled: true
    rate_limit_requests_per_second: 100
    
    # Request timeout
    request_timeout_seconds: 30

cache:
  # Cache configuration
  enabled: true
  
  # Cache TTL in seconds
  ttl_seconds: 3600
  
  # Maximum cache entries
  max_entries: 10000
  
  # Cache eviction policy: lru (least recently used)
  eviction_policy: lru
  
  # Cache statistics
  enable_statistics: true

relay_operations:
  # Transaction verification
  verify_transactions:
    enabled: true
    cache_results: true
    cache_ttl_seconds: 3600
  
  # Block data retrieval
  get_block_data:
    enabled: true
    cache_results: true
    cache_ttl_seconds: 3600
  
  # Account information (read-only)
  get_account_info:
    enabled: true
    cache_results: true
    cache_ttl_seconds: 3600
  
  # Balance queries
  get_balance:
    enabled: true
    cache_results: true
    cache_ttl_seconds: 1800

health_check:
  # Health check configuration
  enabled: true
  interval_seconds: 30
  timeout_seconds: 10
  
  # Health check endpoints
  endpoints:
    - /health
    - /ready
    - /live

monitoring:
  # Metrics collection
  metrics_enabled: true
  
  # Prometheus metrics
  prometheus:
    enabled: true
    port: 9090
    path: /metrics
  
  # Request metrics
  request_metrics:
    - total_requests
    - cached_requests
    - failed_requests
    - cache_hits
    - cache_misses
    - average_response_time
    - p95_response_time
    - p99_response_time

logging:
  # Logging configuration
  level: INFO
  format: json
  
  # Log file
  file:
    enabled: true
    path: /app/logs/tron-relay.log
    
    # Log rotation
    rotation_enabled: true
    rotation_size_mb: 100
    retention_days: 30
    
    # Log compression
    compression_enabled: true
  
  # Structured logging
  structured_logging: true
  
  # Sensitive data masking
  mask_sensitive_data: true

security:
  # Security configuration
  cors:
    enabled: true
    allowed_origins:
      - "*"
    allowed_methods:
      - GET
      - POST
      - OPTIONS
    allowed_headers:
      - "*"
  
  # Trusted hosts
  trusted_hosts:
    - "*"
  
  # Rate limiting
  rate_limiting:
    enabled: true
    requests_per_second: 100
    burst_size: 200
    window_seconds: 60
  
  # Circuit breaker
  circuit_breaker:
    enabled: true
    failure_threshold: 5
    recovery_timeout_seconds: 300
    half_open_requests: 1

error_handling:
  # Error handling configuration
  
  # Retry policy
  retry:
    enabled: true
    max_retries: 3
    initial_delay_seconds: 1
    max_delay_seconds: 60
    exponential_backoff: true
    backoff_multiplier: 2
  
  # Error logging
  error_logging:
    enabled: true
    include_stack_trace: true
    mask_sensitive_data: true

performance:
  # Performance configuration
  
  # Connection pooling
  connection_pool:
    max_connections: 100
    max_keepalive_connections: 20
    keepalive_expiry_seconds: 30
    timeout_seconds: 30
  
  # Request batching
  request_batching:
    enabled: true
    batch_size: 10
    batch_timeout_seconds: 5
  
  # Worker threads
  workers: 1
  
  # Async configuration
  async_enabled: true
  event_loop: auto

deployment:
  # Deployment configuration
  
  # Container environment
  environment: production
  platform: arm64
  architecture: linux/arm64
  
  # Service port
  service_port: 8098
  service_host: 0.0.0.0
  
  # Base path
  base_path: /api/relay
  
  # API documentation
  api_docs_enabled: true
  api_docs_path: /api/docs

metadata:
  # Service metadata
  
  # Security classification
  security_level: public
  pii_handling: none
  private_key_access: false
  
  # Compliance
  read_only_service: true
  state_management: stateless
  cache_management: in_memory
