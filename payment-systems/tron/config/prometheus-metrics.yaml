# LUCID TRON Client - Prometheus Metrics Configuration
# File: payment-systems/tron/config/prometheus-metrics.yaml
# Purpose: Define Prometheus metrics for tron-client service

# Metrics Configuration
metrics:
  enabled: true
  endpoint: "/metrics"
  port: 9090
  registry: "tron_client"
  
  # Metric Labels
  labels:
    service: "lucid-tron-client"
    cluster: "support"
    network: "tron-isolated"
    environment: "${LUCID_ENV:-production}"

# Network Metrics
network_metrics:
  enabled: true
  metrics:
    - name: "tron_network_requests_total"
      type: "counter"
      description: "Total number of TRON network requests"
      labels: ["method", "endpoint", "status"]
    
    - name: "tron_network_latency_seconds"
      type: "histogram"
      description: "TRON network request latency"
      labels: ["method", "endpoint"]
      buckets: [0.01, 0.05, 0.1, 0.25, 0.5, 1.0, 2.5, 5.0, 10.0]
    
    - name: "tron_network_errors_total"
      type: "counter"
      description: "Total number of TRON network errors"
      labels: ["error_type", "endpoint"]
    
    - name: "tron_network_status"
      type: "gauge"
      description: "TRON network connection status"
    
    - name: "tron_network_latest_block"
      type: "gauge"
      description: "Latest block number"
    
    - name: "tron_network_sync_progress"
      type: "gauge"
      description: "Network sync progress percentage"

# Transaction Metrics
transaction_metrics:
  enabled: true
  metrics:
    - name: "tron_transactions_total"
      type: "counter"
      description: "Total number of transactions processed"
      labels: ["type", "status"]
    
    - name: "tron_transaction_duration_seconds"
      type: "histogram"
      description: "Transaction processing duration"
      labels: ["type"]
      buckets: [0.1, 0.5, 1.0, 2.5, 5.0, 10.0, 30.0, 60.0, 300.0]
    
    - name: "tron_transaction_amount_sun"
      type: "histogram"
      description: "Transaction amount in SUN"
      labels: ["type"]
      buckets: [1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000]
    
    - name: "tron_pending_transactions"
      type: "gauge"
      description: "Number of pending transactions"
    
    - name: "tron_confirmed_transactions"
      type: "gauge"
      description: "Number of confirmed transactions"

# Account Metrics
account_metrics:
  enabled: true
  metrics:
    - name: "tron_account_operations_total"
      type: "counter"
      description: "Total number of account operations"
      labels: ["operation", "status"]
    
    - name: "tron_account_cache_size"
      type: "gauge"
      description: "Number of accounts in cache"
    
    - name: "tron_account_balance_requests_total"
      type: "counter"
      description: "Total number of balance requests"
      labels: ["status"]

# Connection Pool Metrics
connection_pool_metrics:
  enabled: true
  metrics:
    - name: "tron_connection_pool_size"
      type: "gauge"
      description: "Connection pool size"
      labels: ["state"]
    
    - name: "tron_connection_pool_active"
      type: "gauge"
      description: "Active connections in pool"
    
    - name: "tron_connection_pool_idle"
      type: "gauge"
      description: "Idle connections in pool"

# Circuit Breaker Metrics
circuit_breaker_metrics:
  enabled: true
  metrics:
    - name: "tron_circuit_breaker_state"
      type: "gauge"
      description: "Circuit breaker state (0=closed, 1=open, 2=half_open)"
      labels: ["breaker_name"]
    
    - name: "tron_circuit_breaker_failures_total"
      type: "counter"
      description: "Total circuit breaker failures"
      labels: ["breaker_name"]

# Retry Metrics
retry_metrics:
  enabled: true
  metrics:
    - name: "tron_retry_attempts_total"
      type: "counter"
      description: "Total retry attempts"
      labels: ["operation", "status"]

# Rate Limiting Metrics
rate_limit_metrics:
  enabled: true
  metrics:
    - name: "tron_rate_limit_hits_total"
      type: "counter"
      description: "Total rate limit hits"
      labels: ["endpoint"]

# Service Health Metrics
service_health_metrics:
  enabled: true
  metrics:
    - name: "tron_service_health"
      type: "gauge"
      description: "Service health status (1=healthy, 0=unhealthy)"
      labels: ["component"]
    
    - name: "tron_service_uptime_seconds"
      type: "gauge"
      description: "Service uptime in seconds"
    
    - name: "tron_monitoring_tasks"
      type: "gauge"
      description: "Number of active monitoring tasks"

# Metric Collection Settings
collection:
  update_interval_seconds: 15
  enable_histogram_buckets: true
  enable_summary_quantiles: false

