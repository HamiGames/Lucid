# Lucid Session Processor - Configuration File
# Optional YAML configuration for chunk processor service
# File: sessions/processor/config.yaml
# Purpose: Configuration for chunk processing, encryption, and storage
# NOTE: All service URLs, ports, and database connections must be provided via
# environment variables from docker-compose.application.yml

service_name: "chunk-processor"
service_version: "1.0.0"
debug: false
# Network configuration from environment:
# - SESSION_PROCESSOR_HOST (default: session-processor)
# - SESSION_PROCESSOR_PORT (default: 8091)
host: "0.0.0.0"  # Bind address (always 0.0.0.0 in container)
port: 8091  # Override with SESSION_PROCESSOR_PORT env var

# Database Configuration
# NOTE: Database URLs MUST come from environment variables:
# - MONGODB_URL (required, from .env.secrets)
# - REDIS_URL (from .env.core or .env.secrets)
# - ELASTICSEARCH_URL (from .env.core or .env.secrets)
mongodb_url: ""  # Set via MONGODB_URL env var (required)
redis_url: ""    # Set via REDIS_URL env var
elasticsearch_url: ""  # Set via ELASTICSEARCH_URL env var

# Encryption Configuration
encryption_algorithm: "AES-256-GCM"
key_rotation_interval: 3600  # seconds

# Worker Configuration
max_workers: 10
queue_size: 1000
worker_timeout: 30  # seconds
batch_size: 100
retry_attempts: 3
retry_delay: 1.0  # seconds

# Storage Configuration
# NOTE: Storage path comes from volumes mounted in docker-compose.application.yml
storage_path: "/app/data/chunks"
max_chunk_size: 10485760  # 10MB in bytes
max_session_size: 107374182400  # 100GB in bytes
compression_enabled: true
compression_level: 6
cleanup_interval: 3600  # seconds

# Performance Configuration
metrics_enabled: true
metrics_interval: 10  # seconds
profiling_enabled: false
memory_limit_mb: 1024
cpu_limit_percent: 80
io_timeout: 30  # seconds

# Security Configuration
allowed_origins: []
rate_limit_enabled: true
rate_limit_requests: 1000
rate_limit_window: 60  # seconds
audit_logging: true
secure_headers: true

# Monitoring Configuration
health_check_interval: 30  # seconds
log_level: "INFO"  # Override with LOG_LEVEL env var
log_format: "json"
prometheus_enabled: true
prometheus_port: 9090
jaeger_enabled: false
jaeger_endpoint: null

# External Service URLs
# NOTE: Service URLs MUST come from environment variables or docker-compose:
# - SESSION_STORAGE_URL (from docker-compose.application.yml)
# - BLOCKCHAIN_ENGINE_URL (from docker-compose.core.yml)
# - API_GATEWAY_URL (from docker-compose.core.yml)
storage_service_url: ""  # Set via SESSION_STORAGE_URL env var (http://session-storage:8082)
blockchain_service_url: ""  # Set via BLOCKCHAIN_ENGINE_URL env var (http://blockchain-engine:8084)
api_gateway_url: ""  # Set via API_GATEWAY_URL env var (http://api-gateway:8080)