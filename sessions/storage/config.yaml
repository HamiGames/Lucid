# Lucid Session Storage - Configuration File
# Optional YAML configuration for session storage service
# File: sessions/storage/config.yaml
# Purpose: Configuration for session storage, chunk management, and data persistence
# NOTE: All service URLs, ports, and database connections must be provided via
# environment variables from docker-compose.application.yml

# Service Configuration
SERVICE_NAME: "lucid-session-storage"
SERVICE_VERSION: "1.0.0"
DEBUG: false
LOG_LEVEL: "INFO"  # Override with LOG_LEVEL env var
HOST: "0.0.0.0"  # Bind address (always 0.0.0.0 in container)
# Network configuration from environment:
# - SESSION_STORAGE_HOST (default: session-storage)
# - SESSION_STORAGE_PORT (default: 8082)
PORT: 8082  # Override with SESSION_STORAGE_PORT env var

# Database Configuration - REQUIRED
# NOTE: Database URLs MUST come from environment variables:
# - MONGODB_URL or MONGO_URL (required, from .env.secrets)
# - REDIS_URL (required, from .env.core or .env.secrets)
MONGODB_URL: ""  # Set via MONGODB_URL or MONGO_URL env var (required)
REDIS_URL: ""    # Set via REDIS_URL env var (required)

# Storage Configuration
# NOTE: Storage paths come from volumes mounted in docker-compose.application.yml
LUCID_STORAGE_PATH: "/app/data/sessions"  # Volume: /data/session-storage:/app/data
LUCID_CHUNK_STORE_PATH: "/app/data/chunks"  # Volume: /data/session-storage:/app/data
TEMP_STORAGE_PATH: "/tmp/storage"  # tmpfs mount: /tmp:size=200m

# Chunk Configuration
LUCID_CHUNK_SIZE_MB: 10  # Chunk size in megabytes (1-100 MB)
LUCID_COMPRESSION_LEVEL: 6  # Compression level (1-9, higher = better compression but slower)
LUCID_COMPRESSION_ALGORITHM: "zstd"  # Compression algorithm: zstd, lz4, or gzip
LUCID_ENCRYPTION_ENABLED: true  # Enable encryption for stored chunks

# Session Configuration
LUCID_RETENTION_DAYS: 30  # Number of days to retain session data
LUCID_MAX_SESSIONS: 1000  # Maximum number of sessions to store
LUCID_MAX_CHUNKS_PER_SESSION: 100000  # Maximum chunks per session
LUCID_CLEANUP_INTERVAL_HOURS: 24  # Hours between cleanup runs

# Backup Configuration
LUCID_BACKUP_ENABLED: true  # Enable backup functionality
LUCID_BACKUP_RETENTION_DAYS: 7  # Number of days to retain backups

# Performance Configuration
SESSION_STORAGE_WORKERS: 1  # Number of uvicorn workers
MAX_STORAGE_SIZE_GB: 1000  # Maximum storage size in GB

# Monitoring Configuration
METRICS_ENABLED: true  # Enable Prometheus metrics
METRICS_PORT: 9217  # Port for metrics endpoint
HEALTH_CHECK_INTERVAL: 30  # Health check interval in seconds

# CORS Configuration (from .env.application)
CORS_ORIGINS: "*"  # From environment: CORS_ORIGINS (comma-separated list, default: "*")

